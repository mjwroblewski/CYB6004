#!/bin/bash


    hack1="1:2011:Mt Gox:Bitcoin:Undisclosed:8,750,000:0:Stolen credentials"                         # 
    hack2="2:2011:Bitcoin7:-:-:-:-:Data - Undisclosed"                                               # 
    hack3="3:2012:Bitcoinica:Bitcoin:43,554:228,000:0:Hot wallet"                                    # 
    hack4="4:2012:Bitcoinica:Bitcoin:38,000:87,000:0:Hot wallet"                                     # 
    hack5="5:2012:Bitcoinica:Bitcoin:40,000:300,000:300,000:Undisclosed"                             # 
    hack6="6:2012:Bitfloor:Bitcoin:24,000:250,000:0:Undisclosed"                                     # 
    hack7="7:2013:Vircurex:Various:250,117:352,000:0:Stolen credentials"                             # 
    hack8="8:2013:Picostocks:Bitcoin:1,300:Undisclosed:0:Undisclosed"                                # 
    hack9="9:2013:Inputs.io:Bitcoin:4,100:1,200,000:0:Server vulnerability"                          # 
    hack10="10:2014:Mt Gox:Bitcoin:844,408:661,348,000:0:Undisclosed"                                # 
    hack11="11:2014:Picostocks:Bitcoin:5,896:4,434,000:0:Cold wallet"                                # 
    hack12="12:2014:Flexcoin:Bitcoin:896:600,000:600,000:Hot wallet"                                 # 
    hack13="13:2014:Poloniex:Bitcoin:97:67,500:67,500:Undisclosed"                                   #
    hack14="14:2014:Crypto Rush:Various:3,450:630,000:630,000:Undisclosed"                           #
    hack15="15:2014:MintPal:Vericoin:8,000,000:1,933,000:0:Hot wallet"                               #
    hack16="16:2014:Cryptysy:Various:313,000:9,580,000:0:Undisclosed"                                #
    hack17="17:2015:Bitstamp:Bitcoin:19,000:5,100,000:0:Cold wallet"                                 # 
    hack18="18:2015:796:Bitcoin:1,000:270,000:0:Internal error"                                      #
    hack19="19:2015:BTER:Bitcoin:7,170:1,750,000:0:Cold wallet"                                      #
    hack20="20:2015:KipCoin:Bitcoin:3,000:728,000:0:Hot wallet"                                      #
    hack21="21:2015:Bitfinex:Bitcoin:1,400:329,000:0:Hot wallet"                                     #
    hack22="22:2016:Gatecoin:Various:185,250:2,140,000:0:Undisclosed"                                #
    hack23="23:2016:ShapeShift:Various:Undisclosed:200,000:0:Hot wallet"                             #
    hack24="24:2016:Bitfinex:Bitcoin:120,000:72,000,000:0:Undisclosed"                               #
    hack25="25:2016:Bitcurex:Bitcoin:Undisclosed:1,500,000:0:Undisclosed"                            #
    hack26="26:2017:Yapizon:Bitcoin:3,831:4,850,000:0:Undisclosed"                                   #
    hack27="27:2017:Bithumb:-:-:-:-:Data - Undisclosed"                                              #
    hack28="28:2017:YouBit:Undisclosed:Undisclosed:Undisclosed:Undisclosed:Undisclosed"              #
    hack29="29:2018:LocalBitcoins:Bitcoin:7.9:27,000:0:Undisclosed"                                  # 
    hack30="30:2018:Coincheck:NEM:500,000,000:500,000,000:0:Undisclosed"                             #
    hack31="31:2018:BitGrail:Nano:17,000,000:170,000,000:0:Undisclosed"                              #
    hack32="32:2018:Coinrail:Various:Undisclosed:40,000,000:0:Undisclosed"                           #
    hack33="33:2018:Bithumb:Various:Undisclosed:31,000,000:0:Undisclosed"                            #
    hack34="34:2018:Bancor:Undisclosed:Undisclosed:23,000,000:0:Undisclosed"                         #
    hack35="35:2018:Zaif:Various:Undisclosed:60,000,000:0:Undisclosed"                               #
    hack36="36:2018:MapleChange:Undisclosed:Undisclosed:Undisclosed:Undisclosed:Undisclosed"         #
    hack37="37:2019:Cryptopia:Various:48,019,391:3,620,000:0:Undisclosed"                            # 
    hack38="38:2019:Coinmama:-:-:-:-:Data - Undisclosed"                                             #
    hack39="39:2019:DragonEX:Undisclosed:Undisclosed:Undisclosed:Undisclosed:Undisclosed"            #
    hack40="40:2019:Coinbene:Undisclosed:Undisclosed:100,000,000:0:Undisclosed"                      #
    hack41="41:2019:Bithumb:EOS:Undisclosed:13,000,000:0:Internal theft"                             #
    hack42="42:2019:Bitrue:Undisclosed:Undisclosed:4,200,000:0:Undisclosed"                          #
    hack43="43:2019:BITPoint:Cash:32,000,000:32,000,000:0:Hot wallet"                                #
    hack44="44:2019:Upbit:Ethereum:342,000:49,000,000:0:Hot wallet"                                  #
    hack45="45:2020:Altsbit:Various:Undisclosed:73,000:0:Undisclosed"                                # 
    hack46="46:2020:BlockFi:-:-:-:-:Unsuccessful"                                                    #
    hack47="47:2020:BuyUcoin:-:-:-:-:Data - Undisclosed"                                             #
    hack48="48:2020:Eterbase:Undisclosed:Undisclosed:5,400,000:0:Undisclosed"                        #
    hack49="49:2020:KuCoin:Undisclosed:Undisclosed:280,000:0:Hot wallet key theft"                   #
    hack50="50:2020:Livecoin:-:-:-:-:Undisclosed"                                                    #
    hack51="51:2021:Cryptopia:Undisclosed:Undisclosed:45,000:45,000:Undisclosed"                     # 
    hack52="52:2021:Hotbit:-:-:-:-:Unsuccessful"                                                     #
    hack53="53:2021:Liquid:Undisclosed:Undisclosed:80,000,000:0:Hot wallet"                          #
    hack54="54:2021:BitMart:Undisclosed:Undisclosed:150,000,000:0:Undisclosed"                       #
    hack55="55:2021:AscendEX:Undisclosed:Undisclosed:78,000,000:0:Undisclosed"                       #
    hack56="56:2022:LCX:Various:Undisclosed:6,800,000:0:Hot wallet"                                  # 
                                                                                                     #
######################################################################################################

# "arrays" function inserts a delimiter "#" at the beginning of variables "$hack1 - $hack56 then copies variables to $arraysfile
# "sed" inserts line breaks at delimiters, deletes the blank top line then deletes the delimeter
# The "$arraysfile" document is the source for subsequent user-generated search results

arraysfile=arrays.txt

black="\033[30m"
red="\033[31m"
green="\033[32m"
brown="\033[33m"
blue="\033[34m"
purple="\033[35m"
cyan="\033[36m"
clear="\033[0m"

    U_sum="awk '{ S+=\$5} END {print Total units stolen: S}'"
    V_sum="awk '{ S+=\$6} END {print Total value stolen: \$S}'"
    R_sum="awk '{ S+=\$7} END {print Total value recovered: \$S}'"

# Year variables

Y_2011_file="Y_2011_file.txt"
Y_2012_file="Y_2012_file.txt"
Y_2013_file="Y_2013_file.txt"
Y_2014_file="Y_2014_file.txt"
Y_2015_file="Y_2015_file.txt"
Y_2016_file="Y_2016_file.txt"
Y_2017_file="Y_2017_file.txt"
Y_2018_file="Y_2018_file.txt"
Y_2019_file="Y_2019_file.txt"
Y_2020_file="Y_2020_file.txt"
Y_2021_file="Y_2021_file.txt"
Y_2022_file="Y_2022_file.txt"


# $formatfile $dumpfile $stripfile

# Function extracts the data from arrays.txt and prints the data for all years as a formatted table

    function arrays() {

        var_a="arrays.txt"
        var_b="arrays_T.txt"

            echo -e \#$hack{1..56} > arrays.txt

            sed -i 's/#/\n&/g' $var_a

                sed -i '1d' $var_a

                    sed -i 's/#//g' $var_a

                        cat $var_a > "arrays_T.txt"

                            sed -i 's/,//g' $var_b
        
      
    }

# Function removes the delimiters from the array in stages. Varaible "var_a" is formatted for display in tables, "var_b" is unformatted and used for calculations only

    function format_text() {

            sed -i 's/#/\n&/g' $var_a

                sed -i '1d' $var_a
    
                    sed -i 's/#//g' $var_a

                        cat $var_a > "$var_b"
                        
                            sed -i 's/,//g' $var_b
    }


# Function prints the data for the selected timeframe (variable $year_a) as a formatted table

    function table_all_data() {
                      
        awk -F":" '

        BEGIN {
    
            printf ("_____________________________________________________________________________________________________________________\n");

            printf ("%-5s %-5s %-15s %-15s %-14s %-14s %-8s %-0s \n","| Hack","| Year","| Exchange","| Currency","| Units"," | \$ Value"," | \$ Recovered","| Vulnerability          |");
 
            printf ("_____________________________________________________________________________________________________________________\n");

        }

        {
        
        printf ("| %-4s | %-4s | %-13s | %-13s | %-13s | %-12s | %-11s | %-22s |\n", $1, $2, $3, $4, $5, $6, $7, $8 );

        printf ("_____________________________________________________________________________________________________________________\n")

        }' $var_a
    }

# Function prints the number of events listed in the table, including the totals for each of columns 4 to 6

    function totals() {

        wc -l $var_a | awk '{print "Total hacks conducted: "$1}'
        awk '{ S+=$5 } END {print "Total units stolen: "S}' $var_b
        awk '{ S+=$6 } END {print "Total value stolen: $"S}' $var_b
        awk '{ S+=$7 } END {print "Total value recovered: $"S}' $var_b 
    }

# Function creates a .txt file for the selected year(s) from the array, prints the data for the selected year by referencing the previous functions, then deletes the .txt files

    function Y_2011() {

        year_a="$Y_2011_file"
        year_b="$Y_2011_T"

        echo -e \#$hack{1..2} > Y_2011_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2011_file
        rm $Y_2011_T
    }

    function Y_2012() {

        year_a="$Y_2012_file"
        year_b="$Y_2012_T"    

        echo -e \#$hack{3..6} > Y_2012_file.txt

        format_text
        table_all_data 
        totals

        rm $Y_2012_file
        rm $Y_2012_T
    }
 
    function Y_2013() {

        year_a="$Y_2013_file"
        year_b="$Y_2013_T"  

        echo -e \#$hack{7..9} > Y_2013_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2013_file
        rm $Y_2013_T
    }
    
    function Y_2014() {

        year_a="$Y_2014_file"
        year_b="$Y_2014_T"  

        echo -e \#$hack{10..16} > Y_2014_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2014_file
        rm $Y_2014_T
    }
        
    function Y_2015() {

        year_a="$Y_2015_file"
        year_b="$Y_2015_T"  

        echo -e \#$hack{17..21} > Y_2015_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2015_file
        rm $Y_2015_T
    }

    function Y_2016() {

        year_a="$Y_2016_file"
        year_b="$Y_2016_T"  

        echo -e \#$hack{22..25} > Y_2016_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2016_file
        rm $Y_2016_T
    }        

    function Y_2017() {

        year_a="$Y_2017_file"
        year_b="$Y_2017_T"  

        echo -e \#$hack{26..28} > Y_2017_file.txt

        format_text
        table_all_data 
        totals

        rm $Y_2017_file
        rm $Y_2017_T
    }
    
    function Y_2018() {

        year_a="$Y_2018_file"
        year_b="$Y_2018_T"  

        echo -e \#$hack{29..36} > Y_2018_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2018_file
        rm $Y_2018_T
    }
    
    function Y_2019() {

        year_a="$Y_2019_file"
        year_b="$Y_2019_T"  

        echo -e \#$hack{37..44} > Y_2019_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2019_file
        rm $Y_2019_T
    }
    
    function Y_2020() {

        year_a="$Y_2020_file"
        year_b="$Y_2020_T"  

        echo -e \#$hack{45..50} > Y_2020_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2020_file
        rm $Y_2020_T
    }
    
    function Y_2021() {

        year_a="$Y_2021_file"
        year_b="$Y_2021_T"  

        echo -e \#$hack{51..55} > Y_2021_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2021_file
        rm $Y_2021_T
    }
    
    function Y_2022() {

        year_a="$Y_2022_file"
        year_b="$Y_2022_T"  

        echo -e \#$hack56 > Y_2022_file.txt

        format_text 
        table_all_data 
        totals

        rm $Y_2022_file
        rm $Y_2022_T
    }

######################################

# Currency

    function C_Bitcoin() {

        var_a="C_Bitcoin.txt"
        var_b="C_Bitcoin_T.txt"

        echo -e \#$hack{1,3,4,5,6,8,9,10,11,12,13,17,18,19,20,21,24,25,26,29} > C_Bitcoin.txt

        format_text 
        table_all_data 
        totals

        rm "C_Bitcoin.txt"
        rm "C_Bitcoin_T.txt"
    }   

    function C_cash() {

        var_a="C_cash.txt"
        var_b="C_cash_T.txt"

        echo -e \#$hack43 > C_cash.txt

        format_text 
        table_all_data 
        totals

        rm "C_cash.txt"
        rm "C_cash_T.txt"
    }   

    function C_EOS() {

        var_a="C_EOS.txt"
        var_b="C_EOS_T.txt"

        echo -e \#$hack41 > C_EOS.txt

        format_text 
        table_all_data 
        totals

        rm "C_EOS.txt"
        rm "C_EOS_T.txt"
    }   

    function C_Ethereum() {

        var_a="C_Ethereum.txt"
        var_b="C_Ethereum_T.txt"

        echo -e \#$hack44 > C_Ethereum.txt

        format_text 
        table_all_data 
        totals

        rm "C_Ethereum.txt"
        rm "C_Ethereum_T.txt"
    } 

    function C_Multiple() {

        var_a="C_Multiple.txt"
        var_b="C_Multiple_T.txt"

        echo -e \#$hack{7,14,16,22,23,32,33,35,37,45,56} > C_Multiple.txt

        format_text 
        table_all_data 
        totals

        rm "C_Multiple.txt"
        rm "C_Multiple_T.txt"
    } 

    function C_NEM() {

        var_a="C_NEM.txt"
        var_b="C_NEM_T.txt"

        echo -e \#$hack30 > C_NEM.txt

        format_text 
        table_all_data 
        totals

        rm "C_NEM.txt"
        rm "C_NEM_T.txt"
    }
    
    function C_Nano() {

        var_a="C_Nano.txt"
        var_b="C_Nano_T.txt"

        echo -e \#$hack31 > C_Nano.txt

        format_text 
        table_all_data 
        totals

        rm "C_Nano.txt"
        rm "C_Nano_T.txt"
    }    

    function C_Vericoin() {

        var_a="C_Vericoin.txt"
        var_b="C_Vericoin_T.txt"

        echo -e \#$hack13 > C_Vericoin.txt

        format_text 
        table_all_data 
        totals

        rm "C_Vericoin.txt"
        rm "C_Vericoin_T.txt"
    }

    function C_Undisclosed() {

        var_a="C_Undisclosed.txt"
        var_b="C_Undisclosed_T.txt"

        echo -e \#$hack{28,34,49,40,42,48,49,51,53,54,55} > C_Undisclosed.txt

        format_text 
        table_all_data 
        totals

        rm "C_Undisclosed.txt"
        rm "C_Undisclosed.txt"
    }

    function C_Data() {

        var_a="C_Data.txt"
        var_b="C_Data_T.txt"

        echo -e \#$hack{2,27,38,46,47,50,52} > C_Data.txt

        format_text 
        table_all_data 
        totals

        rm "C_Data.txt"
        rm "C_Data_T.txt"
    }    


##################################

# Units stolen - CHECK

    function U_A() {

        var_a="U_A.txt"
        var_b="U_A_T.txt"

        echo -e \#$hack{29,13,12} > U_A.txt

        format_text 
        table_all_data 
        totals

        rm "U_A.txt"
        rm "U_A.txt"
    } 

    function U_B() {

        var_a="U_B.txt"
        var_b="U_B_T.txt"

        echo -e \#$hack{18,8,21,20,14,26,9} > U_B.txt

        format_text 
        table_all_data 
        totals

        rm "U_B.txt"
        rm "U_B.txt"
    } 

    function U_C() {

        var_a="U_C.txt"
        var_b="U_C_T.txt"

        echo -e \#$hack{11,19,17,6,4,5,3} > U_C.txt

        format_text 
        table_all_data 
        totals

        rm "U_C.txt"
        rm "U_C_T.txt"
    } 

    function U_D() {

        echo -e None

    } 

    function U_E() {

        var_a="U_E.txt"
        var_b="U_E_T.txt"

        echo -e \#$hack{24,22,7,16,44,10} > U_E.txt

        format_text 
        table_all_data 
        totals

        rm "U_E.txt"
        rm "U_E_T.txt"
    } 

    function U_F() {

        var_a="U_F.txt"
        var_b="U_F_T.txt"

        echo -e \#$hack{15,31,43,37,30} > U_F.txt

        format_text 
        table_all_data 
        totals

        rm "U_F.txt"
        rm "U_F_T.txt"
    } 

    function U_G() {

        var_a="U_G.txt"
        var_b="U_G_T.txt"

        echo -e \#$hack{1,23,25,28,32,33,34,35,36,39,40,41,42,45,48,49,51,53,54,55,56} > U_G.txt

        format_text 
        table_all_data 
        totals

        rm "U_G.txt"
        rm "U_G_T.txt"
    } 

 
####################################################

# Value stolen

    function V_A() {

        var_a="V_A.txt"
        var_b="V_A_T.txt"

        echo -e \#$hack{29,51} > V_A.txt

        format_text 
        table_all_data 
        totals

        rm "V_A.txt"
        rm "V_A.txt"
    } 

    function V_B() {

        var_a="V_B.txt"
        var_b="V_B_T.txt"

        echo -e \#$hack{13,45,4} > V_B.txt

        format_text 
        table_all_data 
        totals

        rm "V_B.txt"
        rm "V_B_T.txt"
    } 

    function V_C() {

        var_a="V_C.txt"
        var_b="V_C_T.txt"

        echo -e \#$hack{23,3,6,18,49,5,21,7} > V_C.txt

        format_text 
        table_all_data 
        totals

        rm "V_C.txt"
        rm "V_C_T.txt"
    } 

    function V_D() {

        var_a="V_D.txt"
        var_b="V_D_T.txt"

        echo -e \#$hack{12,14,20} > V_D.txt

        format_text 
        table_all_data 
        totals

        rm "V_D.txt"
        rm "V_D_T.txt"
    } 

    function V_E() {

        var_a="V_E.txt"
        var_b="V_E_T.txt"

        echo -e \#$hack{9,25,19,15,22,37,42,11,26} > V_E.txt

        format_text 
        table_all_data 
        totals

        rm "V_E.txt"
        rm "V_E_T.txt"
    } 

    function V_F() {

        var_a="V_F.txt"
        var_b="V_F_T.txt"

        echo -e \#$hack{17,48,56,1,16,41,34,33,43,32,44} > V_F.txt

        format_text 
        table_all_data 
        totals

        rm "V_F.txt"
        rm "V_F_T.txt"
    } 

    function V_G() {

        var_a="V_G.txt"
        var_b="V_G_T.txt"

        echo -e \#$hack{35,24,55,53} > V_G.txt

        format_text 
        table_all_data 
        totals

        rm "V_G.txt"
        rm "V_G_T.txt"
    } 

    function V_H() {

        var_a="V_H.txt"
        var_b="V_H_T.txt"

        echo -e \#$hack{40,54,31,30,10} > V_H.txt

        format_text 
        table_all_data 
        totals

        rm "V_H.txt"
        rm "V_H_T.txt"
    } 

    function V_I() {

        var_a="V_I.txt"
        var_b="V_I_T.txt"

        echo -e \#$hack{1,23,25,28,32,33,34,35,36,39,40,41,42,43,45,48,49,51,53,54,55,56} > V_I.txt

        format_text 
        table_all_data 
        totals

        rm "V_I.txt"
        rm "V_I_T.txt"
    } 

#####################################

# Currency recovered

    function R_all() {

        var_a="R_all.txt"
        var_b="R_all_T.txt"

        echo -e \#$hack{51,13,5,12,14} > R_all.txt

        format_text 
        table_all_data 
        totals

        rm "R_all.txt"
        rm "R_all_T.txt"
    }

    function R_none() {

        var_a="R_none.txt"
        var_b="R_none_T.txt"

        echo -e \#$hack{1,3,4,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,26,29,30,31,32,33,34,35,37,40,41,42,43,44,45,48,49,53,54,55,56} > R_none.txt

        format_text 
        table_all_data 
        totals

        rm "R_none.txt"
        rm "R_none_T.txt"
    }

    function R_U() {

        var_a="R_U.txt"
        var_b="R_U_T.txt"

        echo -e \#$hack{28,36,39} > R_U.txt

        format_text 
        table_all_data 
        totals

        rm "R_U.txt"
        rm "R_U_T.txt"
    }

#####################################

# Hack exploit

    function E_A() {

        var_a="E_A.txt"
        var_b="E_A_T.txt"

        echo -e \#$hack{3,4,12,15,20,21,23,43,44,49,53,56} > E_A.txt

        format_text 
        table_all_data 
        totals

        rm "E_A.txt"
        rm "E_A_T.txt"
    }
    
    function E_B() {

    var_a="E_B.txt"
    var_b="E_B_T.txt"

    echo -e \#$hack{11,17,19} > E_B.txt

    format_text 
    table_all_data 
    totals

    rm "E_B.txt"
    rm "E_B_T.txt"

    }

    function E_C() {

    var_a="E_C.txt"
    var_b="E_C_T.txt"

    echo -e \#$hack{1,4} > E_C.txt

    format_text 
    table_all_data 
    totals

    rm "E_C.txt"
    rm "E_C_T.txt"

    }

    function E_D() {

    var_a="E_D.txt"
    var_b="E_D_T.txt"

    echo -e \#$hack18 > E_D.txt

    format_text 
    table_all_data 
    totals

    rm "E_D.txt"
    rm "E_D_T.txt"

    }

    function E_E() {

    var_a="E_E.txt"
    var_b="E_E_T.txt"

    echo -e \#$hack41 > E_E.txt

    format_text 
    table_all_data 
    totals

    rm "E_E.txt"
    rm "E_E_T.txt"

    }

    function E_F() {

    var_a="E_F.txt"
    var_b="E_F_T.txt"

    echo -e \#$hack9 > E_F.txt

    format_text 
    table_all_data 
    totals

    rm "E_F.txt"
    rm "E_F_T.txt"

    }

    function E_G() {

    var_a="E_G.txt"
    var_b="E_G_T.txt"

    echo -e \#$hack{2,5,6,8,10,13,14,16,22,24,25,26,28,29,30,31,32,33,34,35,36,37,38,39,40,42,45,47,48,50,51,54,55} > E_G.txt

    format_text 
    table_all_data 
    totals

    rm "E_G.txt"
    rm "E_G_T.txt"

    }

    function E_H() {

    var_a="E_H.txt"
    var_b="E_H_T.txt"

    echo -e \#$hack{46,52}  > E_H.txt

    format_text 
    table_all_data 
    totals

    rm "E_H.txt"
    rm "E_H_T.txt"

    }
